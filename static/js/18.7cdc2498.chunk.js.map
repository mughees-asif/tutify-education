{"version":3,"sources":["shared/components/CardChart.js"],"names":["labelFormatter","label","format","Date","calculateMin","data","yKey","factor","max","Number","POSITIVE_INFINITY","forEach","element","Math","round","options","CardChart","state","anchorEl","selectedOption","handleClick","event","setState","currentTarget","formatter","value","props","title","getSeconds","Error","getSubtitle","processData","seconds","minSeconds","arr","i","length","timestamp","unshift","selectOption","handleClose","this","color","classes","theme","height","open","Boolean","pt","px","pb","display","justifyContent","variant","aria-label","aria-owns","undefined","aria-haspopup","onClick","id","onClose","PaperProps","style","maxHeight","width","map","option","key","selected","name","className","cardContentInner","type","dataKey","domain","hide","stroke","fill","cursor","contentStyle","border","padding","spacing","borderRadius","shape","boxShadow","shadows","labelStyle","typography","body1","itemStyle","fontSize","letterSpacing","fontFamily","lineHeight","fontWeight","PureComponent","withStyles","marginTop","withTheme"],"mappings":"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","file":"static/js/18.7cdc2498.chunk.js","sourcesContent":["import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  AreaChart,\n  Area,\n  XAxis,\n  Tooltip,\n  ResponsiveContainer,\n  YAxis\n} from \"recharts\";\nimport format from \"date-fns/format\";\nimport {\n  Card,\n  CardContent,\n  Typography,\n  IconButton,\n  Menu,\n  MenuItem,\n  withStyles,\n  Box\n} from \"@material-ui/core\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\n\nconst styles = theme => ({\n  cardContentInner: {\n    marginTop: theme.spacing(-4)\n  }\n});\n\nfunction labelFormatter(label) {\n  return format(new Date(label * 1000), \"MMMM d, p yyyy\");\n}\n\nfunction calculateMin(data, yKey, factor) {\n  let max = Number.POSITIVE_INFINITY;\n  data.forEach(element => {\n    if (max > element[yKey]) {\n      max = element[yKey];\n    }\n  });\n  return Math.round(max - max * factor);\n}\n\nconst itemHeight = 216;\nconst options = [\"1 Week\", \"1 Month\", \"6 Months\"];\n\nclass CardChart extends PureComponent {\n  state = { anchorEl: null, selectedOption: \"1 Month\" };\n\n  handleClick = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  formatter = value => {\n    return [value, this.props.title];\n  };\n\n  getSeconds = () => {\n    const { selectedOption } = this.state;\n    switch (selectedOption) {\n      case \"1 Week\":\n        return 60 * 60 * 24 * 7;\n      case \"1 Month\":\n        return 60 * 60 * 24 * 7 * 31;\n      case \"6 Months\":\n        return 60 * 60 * 24 * 7 * 31 * 6;\n      default:\n        throw new Error(\"No branch selected in switch-statement\");\n    }\n  };\n\n  getSubtitle = () => {\n    const { selectedOption } = this.state;\n    switch (selectedOption) {\n      case \"1 Week\":\n        return \"Last week\";\n      case \"1 Month\":\n        return \"Last month\";\n      case \"6 Months\":\n        return \"Last 6 months\";\n      default:\n        throw new Error(\"No branch selected in switch-statement\");\n    }\n  };\n\n  processData = () => {\n    const { data } = this.props;\n    const seconds = this.getSeconds();\n    const minSeconds = new Date() / 1000 - seconds;\n    const arr = [];\n    for (let i = 0; i < data.length; i += 1) {\n      if (minSeconds < data[i].timestamp) {\n        arr.unshift(data[i]);\n      }\n    }\n    return arr;\n  };\n\n  selectOption = selectedOption => {\n    this.setState({ selectedOption, anchorEl: null });\n  };\n\n  handleClose = () => {\n    this.setState({ anchorEl: null });\n  };\n\n  render() {\n    const { color, data, title, classes, theme, height } = this.props;\n    const { anchorEl, selectedOption } = this.state;\n    const open = Boolean(anchorEl);\n    return (\n      <Card>\n        <Box pt={2} px={2} pb={4}>\n          <Box display=\"flex\" justifyContent=\"space-between\">\n            <div>\n              <Typography variant=\"subtitle1\">{title}</Typography>\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                {this.getSubtitle()}\n              </Typography>\n            </div>\n            <div>\n              <IconButton\n                aria-label=\"More\"\n                aria-owns={open ? \"long-menu\" : undefined}\n                aria-haspopup=\"true\"\n                onClick={this.handleClick}\n              >\n                <MoreVertIcon />\n              </IconButton>\n              <Menu\n                id=\"long-menu\"\n                anchorEl={anchorEl}\n                open={open}\n                onClose={this.handleClose}\n                PaperProps={{\n                  style: {\n                    maxHeight: itemHeight,\n                    width: 200\n                  }\n                }}\n              >\n                {options.map(option => (\n                  <MenuItem\n                    key={option}\n                    selected={option === selectedOption}\n                    onClick={() => {\n                      this.selectOption(option);\n                    }}\n                    name={option}\n                  >\n                    {option}\n                  </MenuItem>\n                ))}\n              </Menu>\n            </div>\n          </Box>\n        </Box>\n        <CardContent>\n          <Box className={classes.cardContentInner} height={height}>\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <AreaChart data={this.processData()} type=\"number\">\n                <XAxis\n                  dataKey=\"timestamp\"\n                  type=\"number\"\n                  domain={[\"dataMin\", \"dataMax\"]}\n                  hide\n                />\n                <YAxis\n                  domain={[calculateMin(data, \"value\", 0.05), \"dataMax\"]}\n                  hide\n                />\n                <Area\n                  type=\"monotone\"\n                  dataKey=\"value\"\n                  stroke={color}\n                  fill={color}\n                />\n                <Tooltip\n                  labelFormatter={labelFormatter}\n                  formatter={this.formatter}\n                  cursor={false}\n                  contentStyle={{\n                    border: \"none\",\n                    padding: theme.spacing(1),\n                    borderRadius: theme.shape.borderRadius,\n                    boxShadow: theme.shadows[1]\n                  }}\n                  labelStyle={theme.typography.body1}\n                  itemStyle={{\n                    fontSize: theme.typography.body1.fontSize,\n                    letterSpacing: theme.typography.body1.letterSpacing,\n                    fontFamily: theme.typography.body1.fontFamily,\n                    lineHeight: theme.typography.body1.lineHeight,\n                    fontWeight: theme.typography.body1.fontWeight\n                  }}\n                />\n              </AreaChart>\n            </ResponsiveContainer>\n          </Box>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nCardChart.propTypes = {\n  color: PropTypes.string.isRequired,\n  data: PropTypes.array.isRequired,\n  title: PropTypes.string.isRequired,\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  height: PropTypes.string.isRequired\n};\n\nexport default withStyles(styles, { withTheme: true })(CardChart);\n"],"sourceRoot":""}